{"remainingRequest":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\multicampus\\Desktop\\project3\\frontend\\src\\components\\album\\AlbumMake.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\src\\components\\album\\AlbumMake.vue","mtime":1636557113851},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojYXBwIHsKCWZvbnQtZmFtaWx5OiAnQXZlbmlyJywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjsKCS13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOwoJLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTsKCXRleHQtYWxpZ246IGNlbnRlcjsKCWNvbG9yOiAjMmMzZTUwOwp9Cg=="},{"version":3,"sources":["AlbumMake.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AlbumMake.vue","sourceRoot":"src/components/album","sourcesContent":["<template>\r\n\t<div id=\"app\" ref=\"document\">\r\n    <div data-html2canvas-ignore=\"true\"> \r\n      <v-combobox\r\n        v-model=\"selectDiary\"\r\n        :items=\"diaryTitleList\"\r\n        label=\"일기장 선택\"\r\n      ></v-combobox>\r\n      <v-btn\r\n        id=\"exportAlbumBtn\"\r\n        style=\"margin: 30px;\"\r\n        @click=\"exportToPDF\"\r\n      >PDF 만들기</v-btn>\r\n\r\n      <v-btn\r\n        id=\"getImageFilesBtn\"\r\n        style=\"margin: 30px;\"\r\n        @click=\"getImageFiles\"\r\n      >다이어리 사진 가져오기</v-btn>\r\n    </div>\r\n\r\n    <div v-for=\"image in imageList\" :key=\"image\">\r\n      <img :src=\"image\" style=\"width: 200px; height: 300px; display: inline-block; float: left; \"/>\r\n    </div>\r\n\r\n    <!-- 다이얼로그 -->\r\n    <v-dialog v-model=\"dialog\" style=\"height: 500px; width: 500px; overflow: scroll\" max-width=\"500\">\r\n      <div style=\"float: left\" v-for=\"image in s3ImageList\" :key=\"image\">\r\n        <img :src=\"image\" style=\"width: 200px; height: 200px;\" @click=\"insertImageList(image)\"/>\r\n      </div>\r\n      <v-btn @click=\"dialog=false\">닫기</v-btn>\r\n    </v-dialog>\r\n\r\n    <div>\r\n      <img style=\"width: 200px;\" :src=\"image\"/>\r\n    </div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport html2pdf from 'html2pdf.js'\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\timage: '',\r\n        dialog: false,\r\n        imageList: [],\r\n        s3ImageList: [],\r\n        selectDiary: '',\r\n        diaryTitleList: [],\r\n\t\t\t}\r\n\t\t},\r\n    name: 'app',\r\n\t\tmethods: {\r\n      // PDF로 export 하기\r\n\t\t\texportToPDF () {\r\n        document.getElementById('exportAlbumBtn').visibility = \"hidden\";\r\n\t\t\t\thtml2pdf(this.$refs.document, {\r\n\t\t\t\t\tmargin: 1,\r\n\t\t\t\t\tfilename: 'document.pdf',\r\n\t\t\t\t\timage: { type: 'png', quality: 0.98 },\r\n\t\t\t\t\thtml2canvas: { \r\n            dpi: 192, \r\n            letterRendering: true, \r\n            allowTaint: true,\r\n          },\r\n\t\t\t\t\tjsPDF: { unit: 'in', format: 'letter', orientation: 'landscape' },          \r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n      // S3에서 다이어리 아이디를 받고, 사진파일들 가져오기\r\n      getImageFiles() {\r\n        var selectDiaryId = -1  // 다이어리 이름에서 Id로 변환\r\n        for(let i=0;i<this.diaryList.length;i++){\r\n          if(this.selectDiary == this.diaryList[i].diaryTitle){\r\n            selectDiaryId = this.diaryList[i].id\r\n            break\r\n          }\r\n        }\r\n\r\n        // S3에서 다이어리 기준 파일들 가져옴.\r\n        if(selectDiaryId == -1) {\r\n          alert('사진을 가져올 다이어리를 선택해주세요')\r\n        } else {\r\n          this.dialog = true\r\n          this.$store.dispatch('getDiaryImageList', selectDiaryId).then((res) => {\r\n            this.s3ImageList = res.data\r\n          })\r\n        }        \r\n      },\r\n\r\n      // 뽑을 이미지들 리스트에 삽입\r\n      insertImageList(image) {\r\n        fetch(image).then((res) => res.blob())\r\n        .then(blob => {\r\n          const image = URL.createObjectURL(blob);\r\n          this.imageList.push(image)\r\n        })\r\n      }\r\n\t\t},\r\n    created() {\r\n      this.imageList = []\r\n      this.s3ImageList = []\r\n      this.dialog = false\r\n      // 다이어리 목록 가져오기\r\n      this.$store.dispatch(\"diaryGet\").then((res) => {\r\n        const tmp = []\r\n        for(let i=0;i<res.data.length;i++) {\r\n          tmp[i] = res.data[i].diaryTitle\r\n        }\r\n        this.diaryTitleList = tmp\r\n        this.diaryList = res.data\r\n      });\r\n\r\n      // fetch('https://papers-bucket.s3.ap-northeast-2.amazonaws.com/diary-cover/sample.png')\r\n      // .then((res) => res.blob())\r\n      // .then(blob => {\r\n      //   this.image = URL.createObjectURL(blob);\r\n      // })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n\t#app {\r\n\t\tfont-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n\t\t-webkit-font-smoothing: antialiased;\r\n\t\t-moz-osx-font-smoothing: grayscale;\r\n\t\ttext-align: center;\r\n\t\tcolor: #2c3e50;\r\n\t}\r\n</style>"]}]}