{"remainingRequest":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\multicampus\\Desktop\\project3\\frontend\\src\\components\\album\\AlbumMake.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\src\\components\\album\\AlbumMake.vue","mtime":1636596790403},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCglpbXBvcnQgaHRtbDJwZGYgZnJvbSAnaHRtbDJwZGYuanMnCgkKCWV4cG9ydCBkZWZhdWx0IHsKCQlkYXRhKCkgewoJCQlyZXR1cm4gewoJCQkJaW1hZ2U6ICcnLAogICAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgICAgaW1hZ2VMaXN0OiBbXSwKICAgICAgICBzM0ltYWdlTGlzdDogW10sCiAgICAgICAgc2VsZWN0RGlhcnk6ICcnLAogICAgICAgIGRpYXJ5VGl0bGVMaXN0OiBbXSwKCQkJfQoJCX0sCiAgICBuYW1lOiAnYXBwJywKCQltZXRob2RzOiB7CiAgICAgIC8vIFBERuuhnCBleHBvcnQg7ZWY6riwCgkJCWV4cG9ydFRvUERGICgpIHsKCQkJCWh0bWwycGRmKHRoaXMuJHJlZnMudGFyZ2V0LCB7CgkJCQkJbWFyZ2luOiAxLAoJCQkJCWZpbGVuYW1lOiAnZG9jdW1lbnQucGRmJywKCQkJCQlpbWFnZToge3R5cGU6ImpwZyIsIHF1YWxpdHk6IDAuOTV9LAoJCQkJCWh0bWwyY2FudmFzOiB7IAogICAgICAgICAgICBkcGk6IDE5MiwgCiAgICAgICAgICAgIGxldHRlclJlbmRlcmluZzogdHJ1ZSwgCiAgICAgICAgICAgIGFsbG93VGFpbnQ6IHRydWUsCiAgICAgICAgICB9LAoJCQkJCWpzUERGOiB7IHVuaXQ6ICdpbicsIGZvcm1hdDogJ2E0Jywgb3JpZW50YXRpb246ICdsYW5kc2NhcGUnIH0sICAgICAgICAgIAoJCQkJfSkKCQkJfSwKCiAgICAgIC8vIFMz7JeQ7IScIOuLpOydtOyWtOumrCDslYTsnbTrlJTrpbwg67Cb6rOgLCDsgqzsp4TtjIzsnbzrk6Qg6rCA7KC47Jik6riwCiAgICAgIGdldEltYWdlRmlsZXMoKSB7CiAgICAgICAgdmFyIHNlbGVjdERpYXJ5SWQgPSAtMSAgLy8g64uk7J207Ja066asIOydtOumhOyXkOyEnCBJZOuhnCDrs4DtmZgKICAgICAgICBmb3IobGV0IGk9MDtpPHRoaXMuZGlhcnlMaXN0Lmxlbmd0aDtpKyspewogICAgICAgICAgaWYodGhpcy5zZWxlY3REaWFyeSA9PSB0aGlzLmRpYXJ5TGlzdFtpXS5kaWFyeVRpdGxlKXsKICAgICAgICAgICAgc2VsZWN0RGlhcnlJZCA9IHRoaXMuZGlhcnlMaXN0W2ldLmlkCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBTM+yXkOyEnCDri6TsnbTslrTrpqwg6riw7KSAIO2MjOydvOuTpCDqsIDsoLjsmLQuCiAgICAgICAgaWYoc2VsZWN0RGlhcnlJZCA9PSAtMSkgewogICAgICAgICAgYWxlcnQoJ+yCrOynhOydhCDqsIDsoLjsmKwg64uk7J207Ja066as66W8IOyEoO2Dne2VtOyjvOyEuOyalCcpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZGlhbG9nID0gdHJ1ZQogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2dldERpYXJ5SW1hZ2VMaXN0Jywgc2VsZWN0RGlhcnlJZCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuczNJbWFnZUxpc3QgPSByZXMuZGF0YQogICAgICAgICAgfSkKICAgICAgICB9ICAgICAgICAKICAgICAgfSwKCiAgICAgIC8vIOu9keydhCDsnbTrr7jsp4Drk6Qg66as7Iqk7Yq47JeQIOyCveyehQogICAgICBpbnNlcnRJbWFnZUxpc3QoaW1hZ2UpIHsKICAgICAgICBmZXRjaChpbWFnZSkudGhlbigocmVzKSA9PiByZXMuYmxvYigpKQogICAgICAgIC50aGVuKGJsb2IgPT4gewogICAgICAgICAgY29uc3QgaW1hZ2UgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgdGhpcy5pbWFnZUxpc3QucHVzaChpbWFnZSkKICAgICAgICB9KQogICAgICB9CgkJfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgIHRoaXMuaW1hZ2VMaXN0ID0gW10KICAgICAgdGhpcy5zM0ltYWdlTGlzdCA9IFtdCiAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2UKICAgICAgLy8g64uk7J207Ja066asIOuqqeuhnSDqsIDsoLjsmKTquLAKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImRpYXJ5R2V0IikudGhlbigocmVzKSA9PiB7CiAgICAgICAgY29uc3QgdG1wID0gW10KICAgICAgICBmb3IobGV0IGk9MDtpPHJlcy5kYXRhLmxlbmd0aDtpKyspIHsKICAgICAgICAgIHRtcFtpXSA9IHJlcy5kYXRhW2ldLmRpYXJ5VGl0bGUKICAgICAgICB9CiAgICAgICAgdGhpcy5kaWFyeVRpdGxlTGlzdCA9IHRtcAogICAgICAgIHRoaXMuZGlhcnlMaXN0ID0gcmVzLmRhdGEKICAgICAgfSk7CgogICAgICAvLyBmZXRjaCgnaHR0cHM6Ly9wYXBlcnMtYnVja2V0LnMzLmFwLW5vcnRoZWFzdC0yLmFtYXpvbmF3cy5jb20vZGlhcnktY292ZXIvc2FtcGxlLnBuZycpCiAgICAgIC8vIC50aGVuKChyZXMpID0+IHJlcy5ibG9iKCkpCiAgICAgIC8vIC50aGVuKGJsb2IgPT4gewogICAgICAvLyAgIHRoaXMuaW1hZ2UgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAvLyB9KQogICAgfQogIH0K"},{"version":3,"sources":["AlbumMake.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AlbumMake.vue","sourceRoot":"src/components/album","sourcesContent":["<template>\r\n\t<div id=\"app\" ref=\"target\">\r\n    <div data-html2canvas-ignore=\"true\"> \r\n      <v-combobox\r\n        v-model=\"selectDiary\"\r\n        :items=\"diaryTitleList\"\r\n        label=\"일기장 선택\"\r\n      ></v-combobox>\r\n      <v-btn\r\n        id=\"exportAlbumBtn\"\r\n        style=\"margin: 30px;\"\r\n        @click=\"exportToPDF\"\r\n      >PDF 만들기</v-btn>\r\n\r\n      <v-btn\r\n        id=\"getImageFilesBtn\"\r\n        style=\"margin: 30px;\"\r\n        @click=\"getImageFiles\"\r\n      >다이어리 사진 가져오기</v-btn>\r\n    </div>\r\n\r\n    <div v-for=\"image in imageList\" :key=\"image\">\r\n      <img :src=\"image\" style=\"width: 200px; height: 300px; display: inline-block; float: left; \"/>\r\n    </div>\r\n\r\n    <!-- 다이얼로그 -->\r\n    <v-dialog v-model=\"dialog\" style=\"height: 500px; width: 500px; overflow: scroll\" max-width=\"500\">\r\n      <div style=\"float: left\" v-for=\"image in s3ImageList\" :key=\"image\">\r\n        <img :src=\"image\" style=\"width: 200px; height: 200px;\" @click=\"insertImageList(image)\"/>\r\n      </div>\r\n      <v-btn @click=\"dialog=false\">닫기</v-btn>\r\n    </v-dialog>\r\n\r\n    <div>\r\n      <img style=\"width: 200px;\" :src=\"image\"/>\r\n    </div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport html2pdf from 'html2pdf.js'\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\timage: '',\r\n        dialog: false,\r\n        imageList: [],\r\n        s3ImageList: [],\r\n        selectDiary: '',\r\n        diaryTitleList: [],\r\n\t\t\t}\r\n\t\t},\r\n    name: 'app',\r\n\t\tmethods: {\r\n      // PDF로 export 하기\r\n\t\t\texportToPDF () {\r\n\t\t\t\thtml2pdf(this.$refs.target, {\r\n\t\t\t\t\tmargin: 1,\r\n\t\t\t\t\tfilename: 'document.pdf',\r\n\t\t\t\t\timage: {type:\"jpg\", quality: 0.95},\r\n\t\t\t\t\thtml2canvas: { \r\n            dpi: 192, \r\n            letterRendering: true, \r\n            allowTaint: true,\r\n          },\r\n\t\t\t\t\tjsPDF: { unit: 'in', format: 'a4', orientation: 'landscape' },          \r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n      // S3에서 다이어리 아이디를 받고, 사진파일들 가져오기\r\n      getImageFiles() {\r\n        var selectDiaryId = -1  // 다이어리 이름에서 Id로 변환\r\n        for(let i=0;i<this.diaryList.length;i++){\r\n          if(this.selectDiary == this.diaryList[i].diaryTitle){\r\n            selectDiaryId = this.diaryList[i].id\r\n            break\r\n          }\r\n        }\r\n\r\n        // S3에서 다이어리 기준 파일들 가져옴.\r\n        if(selectDiaryId == -1) {\r\n          alert('사진을 가져올 다이어리를 선택해주세요')\r\n        } else {\r\n          this.dialog = true\r\n          this.$store.dispatch('getDiaryImageList', selectDiaryId).then((res) => {\r\n            this.s3ImageList = res.data\r\n          })\r\n        }        \r\n      },\r\n\r\n      // 뽑을 이미지들 리스트에 삽입\r\n      insertImageList(image) {\r\n        fetch(image).then((res) => res.blob())\r\n        .then(blob => {\r\n          const image = URL.createObjectURL(blob);\r\n          this.imageList.push(image)\r\n        })\r\n      }\r\n\t\t},\r\n    created() {\r\n      this.imageList = []\r\n      this.s3ImageList = []\r\n      this.dialog = false\r\n      // 다이어리 목록 가져오기\r\n      this.$store.dispatch(\"diaryGet\").then((res) => {\r\n        const tmp = []\r\n        for(let i=0;i<res.data.length;i++) {\r\n          tmp[i] = res.data[i].diaryTitle\r\n        }\r\n        this.diaryTitleList = tmp\r\n        this.diaryList = res.data\r\n      });\r\n\r\n      // fetch('https://papers-bucket.s3.ap-northeast-2.amazonaws.com/diary-cover/sample.png')\r\n      // .then((res) => res.blob())\r\n      // .then(blob => {\r\n      //   this.image = URL.createObjectURL(blob);\r\n      // })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}