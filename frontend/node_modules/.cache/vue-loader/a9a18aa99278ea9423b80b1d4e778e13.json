{"remainingRequest":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\multicampus\\Desktop\\project3\\frontend\\src\\components\\album\\AlbumMake.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\src\\components\\album\\AlbumMake.vue","mtime":1636557113851},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCglpbXBvcnQgaHRtbDJwZGYgZnJvbSAnaHRtbDJwZGYuanMnCgkKCWV4cG9ydCBkZWZhdWx0IHsKCQlkYXRhKCkgewoJCQlyZXR1cm4gewoJCQkJaW1hZ2U6ICcnLAogICAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgICAgaW1hZ2VMaXN0OiBbXSwKICAgICAgICBzM0ltYWdlTGlzdDogW10sCiAgICAgICAgc2VsZWN0RGlhcnk6ICcnLAogICAgICAgIGRpYXJ5VGl0bGVMaXN0OiBbXSwKCQkJfQoJCX0sCiAgICBuYW1lOiAnYXBwJywKCQltZXRob2RzOiB7CiAgICAgIC8vIFBERuuhnCBleHBvcnQg7ZWY6riwCgkJCWV4cG9ydFRvUERGICgpIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwb3J0QWxidW1CdG4nKS52aXNpYmlsaXR5ID0gImhpZGRlbiI7CgkJCQlodG1sMnBkZih0aGlzLiRyZWZzLmRvY3VtZW50LCB7CgkJCQkJbWFyZ2luOiAxLAoJCQkJCWZpbGVuYW1lOiAnZG9jdW1lbnQucGRmJywKCQkJCQlpbWFnZTogeyB0eXBlOiAncG5nJywgcXVhbGl0eTogMC45OCB9LAoJCQkJCWh0bWwyY2FudmFzOiB7IAogICAgICAgICAgICBkcGk6IDE5MiwgCiAgICAgICAgICAgIGxldHRlclJlbmRlcmluZzogdHJ1ZSwgCiAgICAgICAgICAgIGFsbG93VGFpbnQ6IHRydWUsCiAgICAgICAgICB9LAoJCQkJCWpzUERGOiB7IHVuaXQ6ICdpbicsIGZvcm1hdDogJ2xldHRlcicsIG9yaWVudGF0aW9uOiAnbGFuZHNjYXBlJyB9LCAgICAgICAgICAKCQkJCX0pCgkJCX0sCgogICAgICAvLyBTM+yXkOyEnCDri6TsnbTslrTrpqwg7JWE7J2065SU66W8IOuwm+qzoCwg7IKs7KeE7YyM7J2865OkIOqwgOyguOyYpOq4sAogICAgICBnZXRJbWFnZUZpbGVzKCkgewogICAgICAgIHZhciBzZWxlY3REaWFyeUlkID0gLTEgIC8vIOuLpOydtOyWtOumrCDsnbTrpoTsl5DshJwgSWTroZwg67OA7ZmYCiAgICAgICAgZm9yKGxldCBpPTA7aTx0aGlzLmRpYXJ5TGlzdC5sZW5ndGg7aSsrKXsKICAgICAgICAgIGlmKHRoaXMuc2VsZWN0RGlhcnkgPT0gdGhpcy5kaWFyeUxpc3RbaV0uZGlhcnlUaXRsZSl7CiAgICAgICAgICAgIHNlbGVjdERpYXJ5SWQgPSB0aGlzLmRpYXJ5TGlzdFtpXS5pZAogICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gUzPsl5DshJwg64uk7J207Ja066asIOq4sOykgCDtjIzsnbzrk6Qg6rCA7KC47Ji0LgogICAgICAgIGlmKHNlbGVjdERpYXJ5SWQgPT0gLTEpIHsKICAgICAgICAgIGFsZXJ0KCfsgqzsp4TsnYQg6rCA7KC47JisIOuLpOydtOyWtOumrOulvCDshKDtg53tlbTso7zshLjsmpQnKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmRpYWxvZyA9IHRydWUKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXREaWFyeUltYWdlTGlzdCcsIHNlbGVjdERpYXJ5SWQpLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICB0aGlzLnMzSW1hZ2VMaXN0ID0gcmVzLmRhdGEKICAgICAgICAgIH0pCiAgICAgICAgfSAgICAgICAgCiAgICAgIH0sCgogICAgICAvLyDrvZHsnYQg7J2066+47KeA65OkIOumrOyKpO2KuOyXkCDsgr3snoUKICAgICAgaW5zZXJ0SW1hZ2VMaXN0KGltYWdlKSB7CiAgICAgICAgZmV0Y2goaW1hZ2UpLnRoZW4oKHJlcykgPT4gcmVzLmJsb2IoKSkKICAgICAgICAudGhlbihibG9iID0+IHsKICAgICAgICAgIGNvbnN0IGltYWdlID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgIHRoaXMuaW1hZ2VMaXN0LnB1c2goaW1hZ2UpCiAgICAgICAgfSkKICAgICAgfQoJCX0sCiAgICBjcmVhdGVkKCkgewogICAgICB0aGlzLmltYWdlTGlzdCA9IFtdCiAgICAgIHRoaXMuczNJbWFnZUxpc3QgPSBbXQogICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCiAgICAgIC8vIOuLpOydtOyWtOumrCDrqqnroZ0g6rCA7KC47Jik6riwCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJkaWFyeUdldCIpLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnN0IHRtcCA9IFtdCiAgICAgICAgZm9yKGxldCBpPTA7aTxyZXMuZGF0YS5sZW5ndGg7aSsrKSB7CiAgICAgICAgICB0bXBbaV0gPSByZXMuZGF0YVtpXS5kaWFyeVRpdGxlCiAgICAgICAgfQogICAgICAgIHRoaXMuZGlhcnlUaXRsZUxpc3QgPSB0bXAKICAgICAgICB0aGlzLmRpYXJ5TGlzdCA9IHJlcy5kYXRhCiAgICAgIH0pOwoKICAgICAgLy8gZmV0Y2goJ2h0dHBzOi8vcGFwZXJzLWJ1Y2tldC5zMy5hcC1ub3J0aGVhc3QtMi5hbWF6b25hd3MuY29tL2RpYXJ5LWNvdmVyL3NhbXBsZS5wbmcnKQogICAgICAvLyAudGhlbigocmVzKSA9PiByZXMuYmxvYigpKQogICAgICAvLyAudGhlbihibG9iID0+IHsKICAgICAgLy8gICB0aGlzLmltYWdlID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgLy8gfSkKICAgIH0KICB9Cg=="},{"version":3,"sources":["AlbumMake.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AlbumMake.vue","sourceRoot":"src/components/album","sourcesContent":["<template>\r\n\t<div id=\"app\" ref=\"document\">\r\n    <div data-html2canvas-ignore=\"true\"> \r\n      <v-combobox\r\n        v-model=\"selectDiary\"\r\n        :items=\"diaryTitleList\"\r\n        label=\"일기장 선택\"\r\n      ></v-combobox>\r\n      <v-btn\r\n        id=\"exportAlbumBtn\"\r\n        style=\"margin: 30px;\"\r\n        @click=\"exportToPDF\"\r\n      >PDF 만들기</v-btn>\r\n\r\n      <v-btn\r\n        id=\"getImageFilesBtn\"\r\n        style=\"margin: 30px;\"\r\n        @click=\"getImageFiles\"\r\n      >다이어리 사진 가져오기</v-btn>\r\n    </div>\r\n\r\n    <div v-for=\"image in imageList\" :key=\"image\">\r\n      <img :src=\"image\" style=\"width: 200px; height: 300px; display: inline-block; float: left; \"/>\r\n    </div>\r\n\r\n    <!-- 다이얼로그 -->\r\n    <v-dialog v-model=\"dialog\" style=\"height: 500px; width: 500px; overflow: scroll\" max-width=\"500\">\r\n      <div style=\"float: left\" v-for=\"image in s3ImageList\" :key=\"image\">\r\n        <img :src=\"image\" style=\"width: 200px; height: 200px;\" @click=\"insertImageList(image)\"/>\r\n      </div>\r\n      <v-btn @click=\"dialog=false\">닫기</v-btn>\r\n    </v-dialog>\r\n\r\n    <div>\r\n      <img style=\"width: 200px;\" :src=\"image\"/>\r\n    </div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport html2pdf from 'html2pdf.js'\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\timage: '',\r\n        dialog: false,\r\n        imageList: [],\r\n        s3ImageList: [],\r\n        selectDiary: '',\r\n        diaryTitleList: [],\r\n\t\t\t}\r\n\t\t},\r\n    name: 'app',\r\n\t\tmethods: {\r\n      // PDF로 export 하기\r\n\t\t\texportToPDF () {\r\n        document.getElementById('exportAlbumBtn').visibility = \"hidden\";\r\n\t\t\t\thtml2pdf(this.$refs.document, {\r\n\t\t\t\t\tmargin: 1,\r\n\t\t\t\t\tfilename: 'document.pdf',\r\n\t\t\t\t\timage: { type: 'png', quality: 0.98 },\r\n\t\t\t\t\thtml2canvas: { \r\n            dpi: 192, \r\n            letterRendering: true, \r\n            allowTaint: true,\r\n          },\r\n\t\t\t\t\tjsPDF: { unit: 'in', format: 'letter', orientation: 'landscape' },          \r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n      // S3에서 다이어리 아이디를 받고, 사진파일들 가져오기\r\n      getImageFiles() {\r\n        var selectDiaryId = -1  // 다이어리 이름에서 Id로 변환\r\n        for(let i=0;i<this.diaryList.length;i++){\r\n          if(this.selectDiary == this.diaryList[i].diaryTitle){\r\n            selectDiaryId = this.diaryList[i].id\r\n            break\r\n          }\r\n        }\r\n\r\n        // S3에서 다이어리 기준 파일들 가져옴.\r\n        if(selectDiaryId == -1) {\r\n          alert('사진을 가져올 다이어리를 선택해주세요')\r\n        } else {\r\n          this.dialog = true\r\n          this.$store.dispatch('getDiaryImageList', selectDiaryId).then((res) => {\r\n            this.s3ImageList = res.data\r\n          })\r\n        }        \r\n      },\r\n\r\n      // 뽑을 이미지들 리스트에 삽입\r\n      insertImageList(image) {\r\n        fetch(image).then((res) => res.blob())\r\n        .then(blob => {\r\n          const image = URL.createObjectURL(blob);\r\n          this.imageList.push(image)\r\n        })\r\n      }\r\n\t\t},\r\n    created() {\r\n      this.imageList = []\r\n      this.s3ImageList = []\r\n      this.dialog = false\r\n      // 다이어리 목록 가져오기\r\n      this.$store.dispatch(\"diaryGet\").then((res) => {\r\n        const tmp = []\r\n        for(let i=0;i<res.data.length;i++) {\r\n          tmp[i] = res.data[i].diaryTitle\r\n        }\r\n        this.diaryTitleList = tmp\r\n        this.diaryList = res.data\r\n      });\r\n\r\n      // fetch('https://papers-bucket.s3.ap-northeast-2.amazonaws.com/diary-cover/sample.png')\r\n      // .then((res) => res.blob())\r\n      // .then(blob => {\r\n      //   this.image = URL.createObjectURL(blob);\r\n      // })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n\t#app {\r\n\t\tfont-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n\t\t-webkit-font-smoothing: antialiased;\r\n\t\t-moz-osx-font-smoothing: grayscale;\r\n\t\ttext-align: center;\r\n\t\tcolor: #2c3e50;\r\n\t}\r\n</style>"]}]}