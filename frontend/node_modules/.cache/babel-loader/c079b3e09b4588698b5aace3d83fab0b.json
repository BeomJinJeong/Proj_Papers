{"remainingRequest":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\multicampus\\Desktop\\project3\\frontend\\src\\components\\album\\AlbumMake.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\src\\components\\album\\AlbumMake.vue","mtime":1636557113851},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\babel.config.js","mtime":1634793022428},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\multicampus\\Desktop\\project3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGh0bWwycGRmIGZyb20gJ2h0bWwycGRmLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbWFnZTogJycsCiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIGltYWdlTGlzdDogW10sCiAgICAgIHMzSW1hZ2VMaXN0OiBbXSwKICAgICAgc2VsZWN0RGlhcnk6ICcnLAogICAgICBkaWFyeVRpdGxlTGlzdDogW10KICAgIH07CiAgfSwKICBuYW1lOiAnYXBwJywKICBtZXRob2RzOiB7CiAgICAvLyBQREbroZwgZXhwb3J0IO2VmOq4sAogICAgZXhwb3J0VG9QREY6IGZ1bmN0aW9uIGV4cG9ydFRvUERGKCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwb3J0QWxidW1CdG4nKS52aXNpYmlsaXR5ID0gImhpZGRlbiI7CiAgICAgIGh0bWwycGRmKHRoaXMuJHJlZnMuZG9jdW1lbnQsIHsKICAgICAgICBtYXJnaW46IDEsCiAgICAgICAgZmlsZW5hbWU6ICdkb2N1bWVudC5wZGYnLAogICAgICAgIGltYWdlOiB7CiAgICAgICAgICB0eXBlOiAncG5nJywKICAgICAgICAgIHF1YWxpdHk6IDAuOTgKICAgICAgICB9LAogICAgICAgIGh0bWwyY2FudmFzOiB7CiAgICAgICAgICBkcGk6IDE5MiwKICAgICAgICAgIGxldHRlclJlbmRlcmluZzogdHJ1ZSwKICAgICAgICAgIGFsbG93VGFpbnQ6IHRydWUKICAgICAgICB9LAogICAgICAgIGpzUERGOiB7CiAgICAgICAgICB1bml0OiAnaW4nLAogICAgICAgICAgZm9ybWF0OiAnbGV0dGVyJywKICAgICAgICAgIG9yaWVudGF0aW9uOiAnbGFuZHNjYXBlJwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8gUzPsl5DshJwg64uk7J207Ja066asIOyVhOydtOuUlOulvCDrsJvqs6AsIOyCrOynhO2MjOydvOuTpCDqsIDsoLjsmKTquLAKICAgIGdldEltYWdlRmlsZXM6IGZ1bmN0aW9uIGdldEltYWdlRmlsZXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgc2VsZWN0RGlhcnlJZCA9IC0xOyAvLyDri6TsnbTslrTrpqwg7J2066aE7JeQ7IScIElk66GcIOuzgO2ZmAoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmRpYXJ5TGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnNlbGVjdERpYXJ5ID09IHRoaXMuZGlhcnlMaXN0W2ldLmRpYXJ5VGl0bGUpIHsKICAgICAgICAgIHNlbGVjdERpYXJ5SWQgPSB0aGlzLmRpYXJ5TGlzdFtpXS5pZDsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfSAvLyBTM+yXkOyEnCDri6TsnbTslrTrpqwg6riw7KSAIO2MjOydvOuTpCDqsIDsoLjsmLQuCgoKICAgICAgaWYgKHNlbGVjdERpYXJ5SWQgPT0gLTEpIHsKICAgICAgICBhbGVydCgn7IKs7KeE7J2EIOqwgOyguOyYrCDri6TsnbTslrTrpqzrpbwg7ISg7YOd7ZW07KO87IS47JqUJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXREaWFyeUltYWdlTGlzdCcsIHNlbGVjdERpYXJ5SWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXMuczNJbWFnZUxpc3QgPSByZXMuZGF0YTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOu9keydhCDsnbTrr7jsp4Drk6Qg66as7Iqk7Yq47JeQIOyCveyehQogICAgaW5zZXJ0SW1hZ2VMaXN0OiBmdW5jdGlvbiBpbnNlcnRJbWFnZUxpc3QoaW1hZ2UpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBmZXRjaChpbWFnZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgcmV0dXJuIHJlcy5ibG9iKCk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGJsb2IpIHsKICAgICAgICB2YXIgaW1hZ2UgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwoKICAgICAgICBfdGhpczIuaW1hZ2VMaXN0LnB1c2goaW1hZ2UpOwogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICB0aGlzLmltYWdlTGlzdCA9IFtdOwogICAgdGhpcy5zM0ltYWdlTGlzdCA9IFtdOwogICAgdGhpcy5kaWFsb2cgPSBmYWxzZTsgLy8g64uk7J207Ja066asIOuqqeuhnSDqsIDsoLjsmKTquLAKCiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZGlhcnlHZXQiKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgdmFyIHRtcCA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXMuZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgIHRtcFtpXSA9IHJlcy5kYXRhW2ldLmRpYXJ5VGl0bGU7CiAgICAgIH0KCiAgICAgIF90aGlzMy5kaWFyeVRpdGxlTGlzdCA9IHRtcDsKICAgICAgX3RoaXMzLmRpYXJ5TGlzdCA9IHJlcy5kYXRhOwogICAgfSk7IC8vIGZldGNoKCdodHRwczovL3BhcGVycy1idWNrZXQuczMuYXAtbm9ydGhlYXN0LTIuYW1hem9uYXdzLmNvbS9kaWFyeS1jb3Zlci9zYW1wbGUucG5nJykKICAgIC8vIC50aGVuKChyZXMpID0+IHJlcy5ibG9iKCkpCiAgICAvLyAudGhlbihibG9iID0+IHsKICAgIC8vICAgdGhpcy5pbWFnZSA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAvLyB9KQogIH0KfTs="},{"version":3,"sources":["AlbumMake.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div id=\"app\" ref=\"document\">\r\n    <div data-html2canvas-ignore=\"true\"> \r\n      <v-combobox\r\n        v-model=\"selectDiary\"\r\n        :items=\"diaryTitleList\"\r\n        label=\"일기장 선택\"\r\n      ></v-combobox>\r\n      <v-btn\r\n        id=\"exportAlbumBtn\"\r\n        style=\"margin: 30px;\"\r\n        @click=\"exportToPDF\"\r\n      >PDF 만들기</v-btn>\r\n\r\n      <v-btn\r\n        id=\"getImageFilesBtn\"\r\n        style=\"margin: 30px;\"\r\n        @click=\"getImageFiles\"\r\n      >다이어리 사진 가져오기</v-btn>\r\n    </div>\r\n\r\n    <div v-for=\"image in imageList\" :key=\"image\">\r\n      <img :src=\"image\" style=\"width: 200px; height: 300px; display: inline-block; float: left; \"/>\r\n    </div>\r\n\r\n    <!-- 다이얼로그 -->\r\n    <v-dialog v-model=\"dialog\" style=\"height: 500px; width: 500px; overflow: scroll\" max-width=\"500\">\r\n      <div style=\"float: left\" v-for=\"image in s3ImageList\" :key=\"image\">\r\n        <img :src=\"image\" style=\"width: 200px; height: 200px;\" @click=\"insertImageList(image)\"/>\r\n      </div>\r\n      <v-btn @click=\"dialog=false\">닫기</v-btn>\r\n    </v-dialog>\r\n\r\n    <div>\r\n      <img style=\"width: 200px;\" :src=\"image\"/>\r\n    </div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport html2pdf from 'html2pdf.js'\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\timage: '',\r\n        dialog: false,\r\n        imageList: [],\r\n        s3ImageList: [],\r\n        selectDiary: '',\r\n        diaryTitleList: [],\r\n\t\t\t}\r\n\t\t},\r\n    name: 'app',\r\n\t\tmethods: {\r\n      // PDF로 export 하기\r\n\t\t\texportToPDF () {\r\n        document.getElementById('exportAlbumBtn').visibility = \"hidden\";\r\n\t\t\t\thtml2pdf(this.$refs.document, {\r\n\t\t\t\t\tmargin: 1,\r\n\t\t\t\t\tfilename: 'document.pdf',\r\n\t\t\t\t\timage: { type: 'png', quality: 0.98 },\r\n\t\t\t\t\thtml2canvas: { \r\n            dpi: 192, \r\n            letterRendering: true, \r\n            allowTaint: true,\r\n          },\r\n\t\t\t\t\tjsPDF: { unit: 'in', format: 'letter', orientation: 'landscape' },          \r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n      // S3에서 다이어리 아이디를 받고, 사진파일들 가져오기\r\n      getImageFiles() {\r\n        var selectDiaryId = -1  // 다이어리 이름에서 Id로 변환\r\n        for(let i=0;i<this.diaryList.length;i++){\r\n          if(this.selectDiary == this.diaryList[i].diaryTitle){\r\n            selectDiaryId = this.diaryList[i].id\r\n            break\r\n          }\r\n        }\r\n\r\n        // S3에서 다이어리 기준 파일들 가져옴.\r\n        if(selectDiaryId == -1) {\r\n          alert('사진을 가져올 다이어리를 선택해주세요')\r\n        } else {\r\n          this.dialog = true\r\n          this.$store.dispatch('getDiaryImageList', selectDiaryId).then((res) => {\r\n            this.s3ImageList = res.data\r\n          })\r\n        }        \r\n      },\r\n\r\n      // 뽑을 이미지들 리스트에 삽입\r\n      insertImageList(image) {\r\n        fetch(image).then((res) => res.blob())\r\n        .then(blob => {\r\n          const image = URL.createObjectURL(blob);\r\n          this.imageList.push(image)\r\n        })\r\n      }\r\n\t\t},\r\n    created() {\r\n      this.imageList = []\r\n      this.s3ImageList = []\r\n      this.dialog = false\r\n      // 다이어리 목록 가져오기\r\n      this.$store.dispatch(\"diaryGet\").then((res) => {\r\n        const tmp = []\r\n        for(let i=0;i<res.data.length;i++) {\r\n          tmp[i] = res.data[i].diaryTitle\r\n        }\r\n        this.diaryTitleList = tmp\r\n        this.diaryList = res.data\r\n      });\r\n\r\n      // fetch('https://papers-bucket.s3.ap-northeast-2.amazonaws.com/diary-cover/sample.png')\r\n      // .then((res) => res.blob())\r\n      // .then(blob => {\r\n      //   this.image = URL.createObjectURL(blob);\r\n      // })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n\t#app {\r\n\t\tfont-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n\t\t-webkit-font-smoothing: antialiased;\r\n\t\t-moz-osx-font-smoothing: grayscale;\r\n\t\ttext-align: center;\r\n\t\tcolor: #2c3e50;\r\n\t}\r\n</style>"],"sourceRoot":"src/components/album"}]}